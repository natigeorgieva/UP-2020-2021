<html lang="en">

<head>
  <title>Plot Sample - Line</title>
  <link rel='stylesheet' href="https://rawgit.com/domitry/elegans/master/examples/common.css">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r66/three.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.4/d3.min.js"></script>
  <script type="text/javascript" src="https://rawgit.com/domitry/elegans/master/release/elegans.min.js"></script>
  <script type="text/javascript">
    
      

    function plot(){
      let BEGIN = -10, END = 10, INTERVAL = 0.5, DIFF_MAX = 4;
      let particles_data = { x: [], y: [], z: [] };
      console.log(particles_data);
      let str = document.getElementById("inpt").value;
      
      re = /{(-?\d.?\d+),(-?\d.?\d+),(-?\d.?\d+)}/gm

      while ((res = re.exec(str)) !=null) {
        particles_data.x.push(parseFloat(res[1]));
        particles_data.y.push(parseFloat(res[2]));
        particles_data.z.push(parseFloat(res[3]));
      }
      console.log(particles_data);


      var stage = new Elegans.Stage(d3.select("#vis")[0][0]);

      var particles = new Elegans.Particles(particles_data, {
        name: "particles",
        size: 0.1,
        color: "#821515"
      });
      stage.add(particles);
      stage.render();
    };


  </script>
</head>

<body>
  <div style="width: 75%;margin: auto;">
    <div id="vis" style="width: 50%;margin: auto;">
    </div>
    <div style="width: 50%;height: 50% ;margin: auto;background-color:red;display: grid;">
      <textarea name="inpt" id="inpt" cols="30" rows="10"></textarea> 
      <button onclick="plot()">PLOT</button> 
    <div>
  </div>
  
</body>